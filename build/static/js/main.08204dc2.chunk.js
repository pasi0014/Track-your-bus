(this["webpackJsonptrack-bus-app"]=this["webpackJsonptrack-bus-app"]||[]).push([[0],{44:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(36),o=r.n(s),c=(r(44),r(12)),i=r(3),l=r(0);function u(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("footer",{className:"relative bg-gray-700 pt-8 pb-6 text-gray-200",children:Object(l.jsxs)("div",{className:"container mx-auto px-4",children:[Object(l.jsxs)("div",{className:"flex flex-wrap",children:[Object(l.jsxs)("div",{className:"w-full lg:w-6/12 px-4",children:[Object(l.jsx)("h4",{className:"text-3xl font-semibold",children:"Truck your bus"}),Object(l.jsx)("h5",{className:"text-lg mt-0 mb-2 text-gray-100",children:"Developed by Nazar Pasika"})]}),Object(l.jsx)("div",{className:"w-full lg:w-6/12 px-4",children:Object(l.jsx)("div",{className:"flex flex-wrap items-top mb-6",children:Object(l.jsxs)("div",{className:"w-full lg:w-4/12 px-4 ml-auto sm:mt-5",children:[Object(l.jsx)("span",{className:"block uppercase text-gray-100 text-lg font-semibold mb-2",children:"Useful Links"}),Object(l.jsxs)("ul",{className:"list-unstyled",children:[Object(l.jsx)("li",{children:Object(l.jsx)("a",{className:"text-gray-100 hover:text-gray-400 font-semibold block pb-2 text-sm",href:"/about",children:"About"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{className:"text-gray-100 hover:text-gray-400 font-semibold block pb-2 text-sm",href:"https://github.com/pasi0014/Track-your-bus",children:"Github"})})]})]})})})]}),Object(l.jsx)("hr",{className:"my-6 border-gray-400"}),Object(l.jsx)("div",{className:"flex flex-wrap items-center md:justify-between justify-center",children:Object(l.jsx)("div",{className:"w-full md:w-4/12 px-4 mx-auto text-center",children:Object(l.jsxs)("div",{className:"text-sm text-gray-400 font-semibold py-1",children:[(new Date).getFullYear()," "," Nazar Pasika"]})})})]})})})}var d=r(39),h=r(20),b=r(15),x=r(37),j=r(14);function p(){var e=a.a.useState(!1),t=Object(d.a)(e,2),r=t[0],n=t[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("nav",{className:"flex flex-wrap items-center justify-between px-2 py-3 bg-yellow-500 text-white",children:Object(l.jsxs)("div",{className:"container px-4 mx-auto flex flex-wrap items-center justify-between",children:[Object(l.jsxs)("div",{className:"w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start",children:[Object(l.jsxs)(c.b,{to:"/",className:" text-sm font-bold leading-relaxed flex items-center inline-block mr-4 py-2 whitespace-nowrap uppercase",children:[Object(l.jsx)("span",{className:"mr-2",children:Object(l.jsx)(h.a,{icon:["fas","bus"],size:"3x"})}),Object(l.jsx)("span",{className:"text-lg",children:"Track Your Bus"})]}),Object(l.jsx)("button",{className:"cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none",type:"button",onClick:function(){return n(!r)},children:Object(l.jsx)(h.a,{icon:["fas","bars"]})})]}),Object(l.jsx)("div",{className:"lg:flex flex-grow items-center bg-yellow-600 p-5 lg:bg-transparent lg:shadow-none space-y-3"+(r?" block rounded shadow-lg":" hidden"),children:Object(l.jsx)("ul",{className:"flex flex-col lg:flex-row list-none mr-auto",children:Object(l.jsx)(c.b,{to:"/stopInfo",children:Object(l.jsx)("li",{className:"flex items-center",children:Object(l.jsx)("button",{type:"button",className:"text-xs font-bold uppercase px-7 py-3 bg-yellow-500 rounded shadow-lg hover:shadow-md outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-2 mb-3bg-yellow-900 hover:bg-yellow-100 hover:text-gray-500",style:{transition:"all .15s ease"},children:"Find Bus Stop"})})})})})]})})})}b.b.add(j.e,j.f,j.d,j.c,x.a,j.a,j.b,j.g);var m=r(10),f=r(11),g=r(18),v=r(17),y=function(e){Object(g.a)(r,e);var t=Object(v.a)(r);function r(){return Object(m.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"render",value:function(){return Object(l.jsx)("div",{className:"container mx-auto",children:Object(l.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:Object(l.jsx)("div",{className:"lg:flex lg:mx-auto w-full lg:w-10/12 mb-4 mt-4 justify-center lg:space-x-3 p-3",children:Object(l.jsx)("div",{className:"flex flex-col lg:w-10/12 sm:w-12/12",children:Object(l.jsxs)("div",{className:"lg:w-full bg-gray-800 text-white rounded-lg mx-auto my-3 p-16 shadow-lg",children:[Object(l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Truck Your Bus"}),Object(l.jsx)("p",{className:"text-base",children:"You can search for the bus stops and check when the next bus will arive."}),Object(l.jsx)(c.b,{to:"/stopInfo",children:Object(l.jsx)("button",{className:"bg-indigo-600 p-2 mt-5 rounded-lg font-medium px-3 hover:bg-indigo-500 hover:text-gray-100 transition duration-300 ease",children:"Search for stop"})})]})})})})})}}]),r}(a.a.Component),O=r(9),N=r.n(O),w=r(19),k=r(13),R=r(26),S=r.n(R),A=function(e){Object(g.a)(r,e);var t=Object(v.a)(r);function r(){return Object(m.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"relative mt-1",children:[Object(l.jsx)("input",{type:"text",className:"w-full pl-3 pr-10 py-2 border-2 border-gray-200\r rounded-xl hover:border-gray-300 focus:outline-none\r focus:border-blue-500 transition-colors",value:this.props.keyword,onChange:this.props.setKeyword,onKeyPress:this.props.handleEnterKey,placeholder:"Search..."}),Object(l.jsx)("button",{onClick:this.props.setStop,className:"block w-7 h-7 text-center text-xl leading-0 absolute\r top-2 right-2 text-gray-400 focus:outline-none\r hover:text-gray-900 transition-colors",children:Object(l.jsx)(h.a,{icon:["fas","search"]})})]})}}]),r}(a.a.Component),F=function(){return Object(l.jsx)("div",{className:"mt-2 bg-gray-200 text-center text-gray-700 p-3 rounded-lg shadow",children:Object(l.jsx)("h3",{children:"Nothing to Display Yet."})})},I=function(){return Object(l.jsx)("div",{className:"mt-2 bg-red-200 text-center text-red-700 p-3 rounded-lg shadow",children:Object(l.jsx)("h3",{children:"Error, invalid stop number"})})},D=function(){return Object(l.jsx)("div",{className:"w-1/2 bg-green-200 p-10 container text-center mx-auto rounded-lg shadow-lg text-lg font-bold text-green-700",children:Object(l.jsx)("h2",{children:"Loading"})})},E=function(e){return Object(l.jsx)("div",{className:"container mx-auto border lg:w-1/2 sm:w-full border-green-700 p-2 rounded-lg shadow-md mt-7",children:Object(l.jsxs)("div",{className:"flex justify-center flex-col",children:[Object(l.jsx)("h2",{className:"text-gray-500 p-2",children:"Enter stop Number"}),e.children,e.displayRoutesforStop]})})},T=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"printHello",value:function(){console.log("Hello from API")}},{key:"getAPI",value:function(){return this.initializeApiObject()}},{key:"initializeApiObject",value:function(){var e="http://127.0.0.1:8080/";return{apiID:"1ace1705",apiKey:"c4800b494ca9896fbf4978660f3376f9",proxy:e,baseAPIUrl:"".concat(e,"https://api.octranspo1.com/v2.0/GetRouteSummaryForStop"),baseNextBusURL:"".concat(e,"https://api.octranspo1.com/v2.0/GetNextTripsForStop")}}},{key:"checkForAPIResponseErrors",value:function(e){var t="";return"10"===e.GetRouteSummaryForStopResult.Error?"Invalid Stop Number":"2"===e.GetRouteSummaryForStopResult.Error?"Undable to query data source":t}}]),e}(),C=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"timeConvert",value:function(e){var t=e/60,r=Math.floor(t),n=60*(t-r),a=Math.round(n);return 0!==r?r+" hour "+a+" minutes":0===a&&0!==r?r+"hour":1===a?a+" minute":a+" minutes"}}]),e}(),L=function(){return Object(l.jsx)("div",{className:"p-5 bg-yellow-300 rounded-lg shadow-lg text-center w-8/12 mx-auto",children:Object(l.jsx)("h3",{className:"font-medium text-yellow-800",children:"Unfortunatelly, there are no info for this stop."})})},P=function(e){Object(g.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(m.a)(this,r),(n=t.call(this,e)).FetchStopData=Object(w.a)(N.a.mark((function e(){var t,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=T.getAPI(),e.next=4,S()({method:"GET",baseURL:t.baseAPIUrl,url:"?appID=".concat(t.apiID,"&apiKey=").concat(t.apiKey,"&stopNo=").concat(n.state.stop,"&format=json"),timeout:3e3});case 4:return r=e.sent,e.next=7,n.setState({items:r.data});case 7:return e.next=9,n.FetchNextArrivalData(n.state.stop);case 9:""===(a=T.checkForAPIResponseErrors(n.state.items))?(console.log("Should render route list:",a),n.setState({isLoading:!1}),n.setState({loadRoutes:!0}),n.setState({errorMessage:!1})):(console.log("Dont render route list for stop reason::",a),n.setState({loadRoutes:!1}),n.setState({isLoading:!1}),n.setState({errorMessage:!0}));case 11:case"end":return e.stop()}}),e)}))),n.state={items:{},stop:"",route:"",error:!1,search:"",isLoading:!0,loadRoutes:!1,errorMessage:!1,errors:{},gettingNextArrivalInfo:!1,nextArrivalInfo:{}},n.handleChangeEvent=n.handleChangeEvent.bind(Object(k.a)(n)),n.handleClickEvent=n.handleClickEvent.bind(Object(k.a)(n)),n.handleKeyPressEvent=n.handleKeyPressEvent.bind(Object(k.a)(n)),n.FetchStopData=n.FetchStopData.bind(Object(k.a)(n)),n.FetchNextArrivalData=n.FetchNextArrivalData.bind(Object(k.a)(n)),n}return Object(f.a)(r,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"FetchNextArrivalData",value:function(){var e=Object(w.a)(N.a.mark((function e(t){var r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T.getAPI(),e.next=3,S()({method:"get",baseURL:r.baseNextBusURL,url:"?appID=".concat(r.apiID,"&apiKey=").concat(r.apiKey,"&stopNo=").concat(t,"&format=json")});case 3:return n=e.sent,e.next=6,this.setState({nextArrivalInfo:n.data});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClickEvent",value:function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({stop:this.state.search});case 3:this.FetchStopData();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChangeEvent",value:function(e){e.preventDefault(),this.setState({search:e.target.value})}},{key:"handleKeyPressEvent",value:function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=4;break}return e.next=3,this.setState({stop:this.state.search});case 3:this.FetchStopData();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleValidation",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===typeof(t=this.state.search)){e.next=5;break}if(t.match("^[0-9]{4}$")){e.next=5;break}return e.next=5,this.setState({errorMessage:!0});case 5:return e.abrupt("return",this.state.errorMessage);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"displayRoutesforStop",value:function(e,t,r,n){if(n)return Object(l.jsx)(I,{});if(!r)return Object(l.jsx)(F,{});var a=t.GetNextTripsForStopResult.Route.RouteDirection;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("h4",{className:"text-center p-3 uppercase",children:["Stop Name: ",e.GetRouteSummaryForStopResult.StopDescription]}),this.rendeListOfRoutes(e.GetRouteSummaryForStopResult.Routes,a)]})}},{key:"rendeListOfRoutes",value:function(e,t){var r=this,n=e.Route;return null!=e.Route&&e.Route instanceof Array?Object(l.jsx)("ul",{className:"font-medium text-gray-500 text-center divide-y-2",children:e.Route.map((function(e){return Object(l.jsxs)("li",{className:"hover:text-gray-900 p-5 hover:bg-green-100 cursor-pointer flex flex-col",children:["Route - ",e.RouteNo+" "+e.RouteHeading,r.renderNextBusArrivalInfo(t,e)]},"#"+e.RouteNo+" - "+e.RouteHeading)}))}):Array.isArray(e.Route)||null===e.Route?Object(l.jsx)(L,{}):(console.log("Render"),Object(l.jsx)("ul",{className:"font-medium text-gray-500 text-center divide-y-2",children:Object(l.jsxs)("li",{className:"hover:text-gray-900 p-5 hover:bg-green-100 cursor-pointer",children:["Route - ",n.RouteNo+" "+n.RouteHeading]})}))}},{key:"renderNextBusArrivalInfo",value:function(e,t){var r=this;return Array.isArray(e)||void 0===e.Trips||t.RouteNo+t.RouteHeading!==e.RouteNo+e.RouteLabel?t.RouteNo===e.RouteNo||Array.isArray(e)?e instanceof Array&&void 0!==e?(console.log(e),Object(l.jsx)(l.Fragment,{children:e.map((function(e){return t.RouteNo+t.RouteHeading===e.RouteNo+e.RouteLabel?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"text-green-700 mr-2",children:"Next Arrival in:"}),r.renderNextTripsForArrayOfRoutes(e.Trips)]}):null}))})):void 0:Object(l.jsx)("span",{className:"text-red-400",children:"No data :("}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"text-green-700 mr-2",children:"Next Arrival in:"}),e.Trips.Trip.map((function(e){return Object(l.jsx)("span",{children:C.timeConvert(e.AdjustedScheduleTime)},Math.random())}))]})}},{key:"renderNextTripsForArrayOfRoutes",value:function(e){var t=e.Trip;return console.log("Trips::",e),Array.isArray(e.Trip)?Array.isArray(e.Trip)?e.Trip.map((function(e,t){return Object(l.jsx)("span",{children:C.timeConvert(e.AdjustedScheduleTime)},t)})):void 0:Object(l.jsx)("span",{children:C.timeConvert(t.AdjustedScheduleTime)},1)}},{key:"render",value:function(){return this.state.isLoading?Object(l.jsx)(D,{}):Object(l.jsx)(E,{displayRoutesforStop:this.displayRoutesforStop(this.state.items,this.state.nextArrivalInfo,this.state.loadRoutes,this.state.errorMessage),children:Object(l.jsx)(A,{keyword:this.state.search,setKeyword:this.handleChangeEvent,setStop:this.handleClickEvent,handleEnterKey:this.handleKeyPressEvent})})}}]),r}(a.a.Component),K=function(){return Object(l.jsx)("div",{className:"container mx-auto border border-green-300 block p-3",children:Object(l.jsx)("h1",{children:"About this project"})})};var M=function(){return Object(l.jsx)(c.a,{children:Object(l.jsxs)("div",{className:"flex flex-col h-screen justify-between",children:[Object(l.jsx)("div",{children:Object(l.jsx)(p,{})}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",exact:!0,component:y}),Object(l.jsx)(i.a,{path:"/stopInfo",component:P}),Object(l.jsx)(i.a,{path:"/about",component:K})]}),Object(l.jsx)("div",{className:"mt-10",children:Object(l.jsx)(u,{})})]})})};o.a.render(Object(l.jsx)(c.a,{children:Object(l.jsx)(i.c,{children:Object(l.jsx)(M,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.08204dc2.chunk.js.map